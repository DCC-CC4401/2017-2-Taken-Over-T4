{% extends "User/user-standard.html" %}

{% block title %}Denuncia{% endblock %}

{% block content-header %}Subir Denuncia{% endblock %}

{% block content %}
    <form  method="POST" enctype="multipart/form-data" action="{% url 'make-complaint' %}">

        {% csrf_token %}
        <div class="form-group">
            <label class="control-label col-sm-10" for="case-input">Tipo de maltrato:</label>
            <div class="col-sm-10">
                {{ form.case }}
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-10" for="animal_type-input">Tipo de animal</label>
            <div class="col-sm-10">
                {{ form.animal_type }}
            </div>
        </div>
        <div class="form-check form-check-inline">
            <label class="control-label col-sm-10" for="gender-input">Sexo:</label>
            <div class="col-sm-10">
                {{ form.gender }}
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-10" for="color-input">Color:</label>
            <div class="col-sm-10">
                {{ form.color }}
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-10" for="wounded-input">Herido:</label>
            <div class="col-sm-10">
                {{ form.wounded }}
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-10" for="municipality-input">Municipalidad:</label>
            <div class="col-sm-10">
                {{ form.municipality }}
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-10" for="wounded-input">Comentario:</label>
            <div class="col-sm-10">
                {{ form.description }}
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-10" for="image-input">Foto del animal:</label>
            <div class="col-sm-10">
                {{ image_form.complaint_image }}
            </div>
        </div>





<p id="demo"></p>

<script type="text/javascript">
    $( document ).ready(function() {

    getLocation();
});
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);

    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    document.getElementById("id_complaint-lat").value = (Math.round(1000000*position.coords.latitude))/1000000;
    document.getElementById("id_complaint-lng").value = (Math.round(1000000*position.coords.longitude))/1000000;
}

</script>

        {{ form.lat }}
        {{ form.lng }}
        {{ form.directions }}

        <div class="form-group">
            <div class="col-sm-10">
                <br>

                <input type="submit" class="btn btn-primary" value="Envia denuncia" />
                <input type="button" class="btn btn-default" value="Cancelar"/>
            </div>
        </div>

    </form>

    <button onclick="getLocation()">Try It</button>

{% endblock %}